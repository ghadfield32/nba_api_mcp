# NBA MCP Server Environment Variables
# Copy this file to .env and configure as needed

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

# Port for the MCP server to listen on
# Default: 8005
NBA_MCP_PORT=8005

# Host address for the MCP server
# Default: 127.0.0.1
MCP_HOST=127.0.0.1

# Transport protocol: stdio, sse, or websocket
# Default: stdio
MCP_TRANSPORT=stdio

# Environment name: development, staging, production
# Default: development
ENVIRONMENT=development

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Default: INFO
NBA_MCP_LOG_LEVEL=INFO

# Log format: 'text' for human-readable, 'json' for structured logging
# Use 'json' for production environments with log aggregation (Datadog, Splunk, etc.)
# Default: text
LOG_FORMAT=text

# ============================================================================
# REDIS CACHE CONFIGURATION
# ============================================================================

# Enable Redis caching (falls back to in-memory LRU if disabled/unavailable)
# Set to "true" to enable Redis caching for better performance
# Default: false
ENABLE_REDIS_CACHE=false

# Redis server hostname
# Default: localhost
REDIS_HOST=localhost

# Redis server port
# Default: 6379
REDIS_PORT=6379

# Redis database number
# Default: 0
REDIS_DB=0

# Redis connection URL (overrides host/port/db if set)
# Format: redis://host:port/db or redis://host:port (uses db 0)
# Default: none (uses host/port/db settings above)
# REDIS_URL=redis://localhost:6379/0

# Redis connection timeout in seconds
# Default: 0.3
REDIS_CONNECT_TIMEOUT=0.3

# Maximum Redis connection pool size
# Default: 50
REDIS_MAX_CONNECTIONS=50

# ============================================================================
# RATE LIMITING CONFIGURATION
# ============================================================================

# Daily request quota for NBA API calls
# Default: 10000
NBA_MCP_DAILY_QUOTA=10000

# Rate limit for simple tools (requests per minute)
# Default: 60
NBA_MCP_SIMPLE_RATE_LIMIT=60

# Rate limit for complex tools (requests per minute)
# Default: 30
NBA_MCP_COMPLEX_RATE_LIMIT=30

# ============================================================================
# OBSERVABILITY CONFIGURATION
# ============================================================================

# Enable Prometheus metrics collection
# Set to "true" to expose metrics at /metrics endpoint
# Default: false
ENABLE_METRICS=false

# Enable OpenTelemetry distributed tracing
# Set to "true" to send traces to OTLP collector
# Default: false
ENABLE_TRACING=false

# OpenTelemetry Protocol (OTLP) collector endpoint
# Required if ENABLE_TRACING=true
# Example: http://localhost:4317
# OTLP_ENDPOINT=http://localhost:4317

# Enable strict schema validation for API responses
# Default: false
ENABLE_SCHEMA_VALIDATION=false

# ============================================================================
# LLM FALLBACK CONFIGURATION (Natural Language Queries)
# ============================================================================

# Enable/disable LLM fallback for ambiguous queries
# Set to "false" to disable LLM fallback (will use regex-only parsing)
# Default: true
NBA_MCP_ENABLE_LLM_FALLBACK=true

# Ollama model to use for query parsing and planning
# Recommended models:
#   - llama3.2:3b (fast, good accuracy, 3GB RAM)
#   - phi-4:latest (very fast, 2GB RAM)
#   - qwen2.5:7b (best accuracy, 7GB RAM)
#   - mixtral:8x7b (highest quality, 28GB RAM)
# Default: llama3.2:3b
NBA_MCP_LLM_MODEL=llama3.2:3b

# Ollama server URL
# Use http://localhost:11434 for local Ollama installation
# Use http://host.docker.internal:11434 if running in Docker on Mac/Windows
# Default: http://localhost:11434
NBA_MCP_LLM_URL=http://localhost:11434

# LLM request timeout in seconds
# Increase if using slower models or slower hardware
# Default: 5
NBA_MCP_LLM_TIMEOUT=5

# ============================================================================
# DATA STORAGE CONFIGURATION
# ============================================================================

# Directory for saved NBA data (used by save_nba_data tool)
# Default: mcp_data/
NBA_MCP_DATA_DIR=mcp_data/

# ============================================================================
# CONCURRENCY CONFIGURATION
# ============================================================================

# Maximum concurrent requests for live endpoints (scoreboard, play-by-play)
# Lower value = more conservative, less load on NBA API
# Default: 4
NBA_MCP_MAX_CONCURRENT_LIVE=4

# Maximum concurrent requests for standard endpoints
# Default: 8
NBA_MCP_MAX_CONCURRENT_STANDARD=8

# Maximum concurrent requests for heavy endpoints (shot charts, detailed stats)
# Default: 2
NBA_MCP_MAX_CONCURRENT_HEAVY=2

# Number of threads for DuckDB query processing
# Default: 4
NBA_MCP_DUCKDB_THREADS=4
